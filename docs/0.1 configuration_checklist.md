# 🔧 Google ADK 营销代理系统配置检查清单

## 📋 快速配置验证

使用此清单确保您的环境配置正确无误。

### ✅ 基础环境检查

```bash
# 1. 检查系统架构
uname -m
# 期望输出: arm64 (Apple Silicon)

# 2. 检查 Homebrew
brew --version
# 期望输出: Homebrew 版本信息

# 3. 检查 Python 版本
python3 --version
# 期望输出: Python 3.9+ 

# 4. 检查 Git
git --version
# 期望输出: git version 信息

# 5. 检查 Google Cloud SDK
gcloud --version
# 期望输出: Google Cloud SDK 版本信息
```

### ✅ Google Cloud 配置检查

```bash
# 1. 检查当前项目
gcloud config get-value project
# 期望输出: 您的项目 ID

# 2. 检查认证状态
gcloud auth list
# 期望输出: 显示已认证的账户

# 3. 检查默认区域
gcloud config get-value compute/region
# 期望输出: us-central1 或其他区域

# 4. 检查已启用的 API
gcloud services list --enabled --filter="name:aiplatform.googleapis.com OR name:storage.googleapis.com"
# 期望输出: 显示已启用的 API
```

### ✅ 项目环境检查

```bash
# 1. 进入项目目录
cd ~/adk-marketing-project

# 2. 检查虚拟环境
ls -la adk-env/
# 期望输出: 虚拟环境目录结构

# 3. 激活虚拟环境
source adk-env/bin/activate

# 4. 检查 Python 包
pip list | grep google
# 期望输出: 显示已安装的 Google 相关包

# 5. 检查 ADK 示例代码
ls -la adk-samples/python/agents/marketing-agency/
# 期望输出: 营销代理相关文件
```

### ✅ 配置文件检查

```bash
# 1. 检查 .env 文件
cat .env
# 期望输出: 正确的环境变量配置

# 2. 检查服务账号密钥文件
ls -la $GOOGLE_APPLICATION_CREDENTIALS
# 期望输出: JSON 密钥文件信息

# 3. 验证环境变量
echo $GOOGLE_CLOUD_PROJECT
echo $GOOGLE_CLOUD_LOCATION
echo $GOOGLE_APPLICATION_CREDENTIALS
# 期望输出: 正确的环境变量值
```

## 🚨 常见问题快速修复

### 问题 1: Homebrew 未找到

**症状:** `brew: command not found`

**解决方案:**
```bash
# 重新加载 shell 配置
source ~/.zshrc

# 或手动添加 PATH
echo 'eval "$(/opt/homebrew/bin/brew shellenv)"' >> ~/.zshrc
source ~/.zshrc
```

### 问题 2: Python 版本过低

**症状:** Python 版本 < 3.9

**解决方案:**
```bash
# 安装最新 Python
brew install python@3.10

# 更新别名
echo 'alias python=/opt/homebrew/bin/python3.10' >> ~/.zshrc
source ~/.zshrc
```

### 问题 3: gcloud 未初始化

**症状:** `gcloud config get-value project` 返回空

**解决方案:**
```bash
# 初始化 gcloud
gcloud init

# 设置默认项目
gcloud config set project YOUR_PROJECT_ID

# 设置默认区域
gcloud config set compute/region us-central1
```

### 问题 4: API 未启用

**症状:** API 调用失败

**解决方案:**
```bash
# 启用必要的 API
gcloud services enable aiplatform.googleapis.com
gcloud services enable storage.googleapis.com
gcloud services enable cloudbuild.googleapis.com
gcloud services enable secretmanager.googleapis.com

# 验证 API 状态
gcloud services list --enabled
```

### 问题 5: 服务账号权限不足

**症状:** 权限错误

**解决方案:**
```bash
# 检查服务账号
gcloud iam service-accounts list

# 重新授予权限
gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
    --member="serviceAccount:adk-marketing-agent@$GOOGLE_CLOUD_PROJECT.iam.gserviceaccount.com" \
    --role="roles/aiplatform.admin"

gcloud projects add-iam-policy-binding $GOOGLE_CLOUD_PROJECT \
    --member="serviceAccount:adk-marketing-agent@$GOOGLE_CLOUD_PROJECT.iam.gserviceaccount.com" \
    --role="roles/storage.admin"
```

### 问题 6: 虚拟环境问题

**症状:** 包导入失败

**解决方案:**
```bash
# 重新创建虚拟环境
rm -rf adk-env
python3 -m venv adk-env
source adk-env/bin/activate

# 重新安装依赖
pip install --upgrade pip
pip install -r requirements.txt
```

### 问题 7: M 系列芯片兼容性

**症状:** 包安装失败

**解决方案:**
```bash
# 设置架构环境变量
export ARCHFLAGS="-arch arm64"

# 使用 Rosetta 安装（如果需要）
arch -x86_64 pip install package-name

# 或使用 conda 替代 pip
brew install miniconda
conda create -n adk-env python=3.10
conda activate adk-env
```

## 🧪 环境测试脚本

运行以下命令进行完整的环境测试：

```bash
# 进入项目目录
cd ~/adk-marketing-project

# 激活虚拟环境
source adk-env/bin/activate

# 运行环境测试
python test_environment.py

# 或使用快速启动脚本
./quick_start.sh
```

## 📊 配置验证矩阵

| 组件 | 检查命令 | 期望结果 | 状态 |
|------|----------|----------|------|
| 系统架构 | `uname -m` | arm64 | ⬜ |
| Homebrew | `brew --version` | 版本信息 | ⬜ |
| Python | `python3 --version` | 3.9+ | ⬜ |
| Git | `git --version` | 版本信息 | ⬜ |
| gcloud | `gcloud --version` | 版本信息 | ⬜ |
| 项目配置 | `gcloud config get-value project` | 项目 ID | ⬜ |
| 认证状态 | `gcloud auth list` | 已认证账户 | ⬜ |
| AI Platform API | `gcloud services list --enabled \| grep aiplatform` | 已启用 | ⬜ |
| 虚拟环境 | `source adk-env/bin/activate` | 成功激活 | ⬜ |
| Python 包 | `pip list \| grep google` | Google 包列表 | ⬜ |
| 配置文件 | `cat .env` | 正确配置 | ⬜ |
| 密钥文件 | `ls $GOOGLE_APPLICATION_CREDENTIALS` | 文件存在 | ⬜ |
| 环境测试 | `python test_environment.py` | 全部通过 | ⬜ |

## 🎯 配置完成标志

当以下所有项目都显示 ✅ 时，您的环境配置完成：

- [ ] 系统架构为 Apple Silicon (arm64)
- [ ] Homebrew 正常工作
- [ ] Python 3.9+ 已安装
- [ ] Git 已配置
- [ ] Google Cloud SDK 已安装并初始化
- [ ] 必要的 Google Cloud API 已启用
- [ ] 服务账号和密钥文件已创建
- [ ] 虚拟环境已创建并激活
- [ ] Python 依赖包已安装
- [ ] 环境变量已正确设置
- [ ] ADK 示例代码已克隆
- [ ] 环境测试脚本运行成功

## 📞 获取帮助

如果遇到无法解决的问题：

1. **查看日志:** 检查命令输出和错误信息
2. **重新运行:** 尝试重新运行失败的步骤
3. **清理重建:** 删除相关组件并重新安装
4. **查看文档:** 参考 Google Cloud 和 ADK 官方文档
5. **社区支持:** 在相关 GitHub 仓库提交 issue

## 🚀 下一步

环境配置完成后，您可以：

1. **运行示例:** 测试营销代理系统
2. **探索代码:** 了解各个代理的实现
3. **自定义配置:** 根据需求调整参数
4. **开发扩展:** 创建自己的代理功能

祝您配置顺利！🎉